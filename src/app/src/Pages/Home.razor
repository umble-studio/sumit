@page "/"
@using app.Services.Extension
@using Sumit.Extension.Extensions

@if (_componentType is not null)
{
    <DynamicComponent Type="_componentType"/>
}

@code {

    private Type? _componentType;

    [Inject] public HttpClient HttpClient { get; set; } = null!;
    [Inject] public ExtensionManager Extensions { get; set; } = null!;
    
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        await Extensions.LoadExtensions();

        if (!Extensions.GetExtension("Finder", out var extension)) return;
        if (!extension.GetComponentEntry(out var component)) return;

        if (_componentType != component.Type)
        {
            _componentType = component.Type;
            StateHasChanged();
        }
    }

}